{% extends "base.html" %}
{% load i18n %}

{% block content %}
  <div class="hero">
    <h1 class="display-6">{{ title|default:_("Manual Transaction") }}</h1>
    <p class="mb-0">{% if transaction %}{% trans "Modify transaction details." %}{% else %}{% trans "Add a transaction without importing a PDF." %}{% endif %}</p>
  </div>

  <div class="card p-4">
    <form method="post">
      {% csrf_token %}
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label">{% trans "Bank" %}</label>
          <input class="form-control" name="bank" value="{{ transaction.bank|default:'' }}">
        </div>
        <div class="col-md-4">
          <label class="form-label">{% trans "Account" %}</label>
          <input class="form-control" name="account_last4" value="{{ transaction.account_last4|default:'' }}">
        </div>
        <div class="col-md-4">
          <label class="form-label">{% trans "Date" %}</label>
          <input class="form-control" type="date" name="date" value="{{ transaction.date|date:'Y-m-d' }}">
        </div>
        <div class="col-md-4">
          <label class="form-label">{% trans "Time" %}</label>
          <input class="form-control" type="time" name="time" value="{{ transaction.time|time:'H:i' }}">
        </div>
        <div class="col-md-4">
          <label class="form-label">{% trans "Amount" %}</label>
          <input class="form-control" name="amount" value="{{ transaction.amount|default:'' }}">
        </div>
        <div class="col-md-4">
          <label class="form-label">{% trans "Currency" %}</label>
          <input class="form-control" name="currency" value="{{ transaction.currency|default:'COP' }}">
        </div>
        <div class="col-md-6">
          <label class="form-label">{% trans "Movement Type" %}</label>
          <select class="form-select" name="movement_type">
            <option value="">{% trans "-- Select --" %}</option>
            {% for mt in movement_types %}
              <option value="{{ mt.name }}" {% if transaction.movement_type.name == mt.name %}selected{% endif %}>{{ mt.name }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-md-6">
          <label class="form-label">{% trans "Reference" %}</label>
          <input class="form-control" name="reference" value="{{ transaction.reference|default:'' }}">
        </div>
        <div class="col-md-6">
          <label class="form-label">{% trans "Merchant" %}</label>
          <input class="form-control" name="merchant" value="{{ transaction.merchant|default:'' }}">
        </div>
        <div class="col-md-6">
          <label class="form-label">{% trans "Location" %}</label>
          <input class="form-control" name="location" value="{{ transaction.location|default:'' }}">
        </div>
        <div class="col-md-6">
          <label class="form-label">{% trans "Channel" %}</label>
          <input class="form-control" name="channel" value="{{ transaction.channel|default:'' }}">
        </div>
        <div class="col-12">
          <label class="form-label">{% trans "Description" %}</label>
          <textarea class="form-control" name="description" rows="3">{{ transaction.description|default:'' }}</textarea>
        </div>
      </div>
      <div class="mt-3 d-flex gap-2">
        <button class="btn btn-success" type="submit">{% trans "Save" %}</button>
        <a class="btn btn-outline-secondary" href="/transactions/">{% trans "Cancel" %}</a>
      </div>
    </form>
  </div>
{% endblock %}
